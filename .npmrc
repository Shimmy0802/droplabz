# Registry: use npmjs (default, most compatible with CI)
registry=https://registry.npmjs.org/

# Enable strict SSL to prevent MitM attacks
strict-ssl=true

# CRITICAL: Extended timeouts for registry fallback scenarios
# Allows time for registry failover without immediate timeout
fetch-timeout=180000
fetch-retry-mintimeout=30000
fetch-retry-maxtimeout=180000
fetch-retries=10

# Prefer online to avoid stale cache in CI
prefer-offline=false

# Allow install scripts (needed for Prisma client generation)
ignore-scripts=false

# Store directory for monorepo optimization
store-dir=.pnpm-store

# Free tier optimization: Sequential package fetches
# Prevents concurrent registry connections that fail on limited bandwidth
shamefully-hoist=false
strict-peer-dependencies=false

# NODE_OPTIONS tuning for Vercel free tier (limited memory)
node-linker=pnpm

# Auto-install peer dependencies
auto-install-peers=true
