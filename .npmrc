# Primary registry (most stable for Vercel CI/CD environment)
registry=https://registry.npmjs.org/

# Enable strict SSL to prevent MitM attacks
strict-ssl=true

# pnpm-specific timeout settings optimized for Vercel free tier
# CRITICAL: Use sequential installs on free tier (1 concurrent build)
fetch-timeout=120000
fetch-retry-mintimeout=20000
fetch-retry-maxtimeout=120000
fetch-retries=5

# Prefer offline to avoid registry flooding
prefer-offline=true

# Disable script execution during install (can cause timeouts in CI)
ignore-scripts=true

# Store directory for monorepo optimization
store-dir=.pnpm-store

# Free tier optimization: Sequential package fetches
# Prevents concurrent registry connections that fail on limited bandwidth
shamefully-hoist=false
strict-peer-dependencies=false

# NODE_OPTIONS tuning for Vercel free tier (limited memory)
node-linker=pnpm

# Auto-install peer dependencies
auto-install-peers=true
